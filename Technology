<!-- Categories Table -->
<section class="category-table-section">
  <h3>Categories List</h3>
  <i>Note: You cannot delete categories with approved goods</i>
  
  <p-table 
    [value]="categories" 
    [paginator]="true" 
    [rows]="rows" 
    [showCurrentPageReport]="true" 
    [(first)]="first"
    [totalRecords]="totalRecords"
    [rowsPerPageOptions]="[5, 10, 25]"
    [sortMode]="'multiple'"
    currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    (onPage)="onPageChange($event)">
    
    <ng-template pTemplate="header">
      <tr>
        <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
        <th pSortableColumn="description">Description <p-sortIcon field="description"></p-sortIcon></th>
        <th pSortableColumn="storageRequirements">Storage <p-sortIcon field="storageRequirements"></p-sortIcon></th>
        <th pSortableColumn="isPerishable">Perishable <p-sortIcon field="isPerishable"></p-sortIcon></th>
        <th pSortableColumn="shelfLife">Shelf Life <p-sortIcon field="shelfLife"></p-sortIcon></th>
        <th>Actions</th>
      </tr>
    </ng-template>
    
    <ng-template pTemplate="body" let-category>
      <tr>
        <td>{{ category.name }}</td>
        <td>{{ category.description }}</td>
        <td>{{ category.storageRequirements }}</td>
        <td>{{ category.isPerishable ? 'Yes' : 'No' }}</td>
        <td>{{ category.isPerishable ? (category.shelfLife + ' days') : 'N/A' }}</td>
        <td>
          <button pButton icon="pi pi-pencil" 
                  class="p-button-rounded p-button-success p-button-sm small-icon-button"
                  (click)="editCategory(category)">
          </button>
          <button pButton icon="pi pi-trash" 
                  class="p-button-rounded p-button-danger p-button-sm ml-2 small-icon-button"
                  (click)="deleteCategory(category.id)">
          </button>
        </td>
      </tr>
    </ng-template>
    
    <ng-template pTemplate="paginatorleft">
      <p>Total Records: {{totalRecords}}</p>
    </ng-template>
  </p-table>
</section>
